<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Configura√ß√µes - OD Drive</title>
  <link rel="stylesheet" href="../../styles/globals.css">
  <link rel="stylesheet" href="../../styles/theme.css">
  <link rel="stylesheet" href="./settings.css">
</head>
<body class="settings-page">
  <div class="settings-container">
    <header class="settings-header">
      <button class="btn-back" id="btn-back">‚Üê Voltar</button>
      <h1>‚öôÔ∏è Configura√ß√µes</h1>
    </header>

    <main class="settings-content">
      <section class="settings-section">
        <div class="section-header">
          <h2>üöÄ Integra√ß√£o Google Slides</h2>
          <p class="section-description">
            Autorize o aplicativo a duplicar o template e exportar PDFs diretamente no Google Slides.
          </p>
        </div>

        <div class="slides-status">
          <div class="status-indicator">
            <span class="status-dot" id="status-dot"></span>
            <span class="status-text" id="status-text">Verificando...</span>
          </div>

          <div class="status-details" id="status-details" style="display: none;">
            <div class="detail-row">
              <span class="detail-label">Status:</span>
              <span class="detail-value" id="detail-status">---</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Conectado em:</span>
              <span class="detail-value" id="detail-connected">---</span>
            </div>
            <div class="detail-row">
              <span class="detail-label">Expira em:</span>
              <span class="detail-value" id="detail-expires">---</span>
            </div>
          </div>
        </div>

        <div class="settings-actions">
          <button class="btn btn-primary" id="btn-connect-slides" style="display:none;">
            üîó Conectar com Google Slides
          </button>
          <button class="btn btn-secondary" id="btn-disconnect-slides" style="display:none;">
            üîå Desconectar
          </button>
          <button class="btn btn-secondary" id="btn-refresh-token" style="display:none;">
            üåÄ Renovar Token
          </button>
        </div>

        <div class="settings-info">
          <h4>‚ùì Como funciona?</h4>
          <ol>
            <li>Clique em "Conectar com Google Slides".</li>
            <li>O Google abrir√° no navegador solicitando a autoriza√ß√£o.</li>
            <li>Use a mesma conta que possui o template base.</li>
            <li>Depois de autorizado, volte ao app e gere o PDF normalmente.</li>
          </ol>
        </div>
      </section>

      <section class="settings-section">
        <div class="section-header">
          <h2>üóÇÔ∏è IDs de Templates e Pastas</h2>
          <p class="section-description">
            Cole aqui os IDs das apresenta√ß√µes e pastas do Google Slides/Drive utilizadas pelo gerador.
            Eles ficam salvos no computador e podem ser alterados a qualquer momento.
          </p>
        </div>

        <form id="google-config-form">
          <div class="config-group">
            <h3>Templates do Google Slides</h3>
            <div class="config-grid">
              <div class="config-field">
                <label for="templateOdInId">Template OD IN</label>
                <input type="text" id="templateOdInId" placeholder="ID espec√≠fico para OD IN">
              </div>
              <div class="config-field">
                <label for="templateOdVtId">Template OD VT</label>
                <input type="text" id="templateOdVtId" placeholder="ID espec√≠fico para OD VT">
              </div>
              <div class="config-field">
                <label for="templateOdDropId">Template OD DROP</label>
                <input type="text" id="templateOdDropId" placeholder="ID espec√≠fico para OD DROP">
              </div>
              <div class="config-field">
                <label for="templateOdFullId">Template OD FULL</label>
                <input type="text" id="templateOdFullId" placeholder="ID espec√≠fico para OD FULL">
              </div>
              <div class="config-field">
                <label for="templateOdPackId">Template OD PACK</label>
                <input type="text" id="templateOdPackId" placeholder="ID espec√≠fico para OD PACK">
              </div>
            </div>
          </div>

          <div class="config-group">
            <h3>Pastas no Google Drive</h3>
            <div class="config-grid">
              <div class="config-field">
                <label for="presentationsFolderId">Pasta de apresenta√ß√µes</label>
                <input type="text" id="presentationsFolderId" placeholder="ID da pasta no Drive onde salvar as c√≥pias">
              </div>
              <div class="config-field">
                <label for="assetsFolderId">Pasta para uploads (imagens)</label>
                <input type="text" id="assetsFolderId" placeholder="ID da pasta usada para armazenar imagens">
              </div>
            </div>
          </div>

          <div class="config-group">
            <h3>Credenciais do Google Cloud</h3>
            <p class="config-note">
              Use o mesmo Client ID/Secret configurado no console do Google Cloud para o OAuth. 
              Esses dados ficam salvos apenas neste computador.
            </p>
            <div class="config-grid">
              <div class="config-field">
                <label for="clientId">OAuth Client ID</label>
                <input type="text" id="clientId" placeholder="Ex.: 123456.apps.googleusercontent.com">
              </div>
              <div class="config-field">
                <label for="clientSecret">OAuth Client Secret</label>
                <input type="password" id="clientSecret" placeholder="Segredo do OAuth">
              </div>
              <div class="config-field">
                <label for="redirectUri">Redirect URI</label>
                <input type="text" id="redirectUri" placeholder="Ex.: http://127.0.0.1:8080/api/slides/oauth/callback">
                <small>Deve ser o mesmo registrado no console do Google Cloud.</small>
              </div>
            </div>
          </div>

          <label class="config-switch">
            <input type="checkbox" id="publicShare">
            <span>Compartilhar automaticamente as apresenta√ß√µes como p√∫blicas (link acess√≠vel via URL)</span>
          </label>

          <div class="config-actions">
            <button type="button" class="btn btn-secondary" id="btn-reset-config">Restaurar padr√£o</button>
            <button type="submit" class="btn btn-primary">Salvar IDs</button>
          </div>

          <p class="config-hint">
            Dica: o ID fica entre <code>/d/</code> e <code>/edit</code> na URL do Google Slides/Drive.
          </p>
        </form>
      </section>

      <section class="settings-section">
        <div class="section-header">
          <h2>‚ÑπÔ∏è Sobre o Aplicativo</h2>
        </div>
        <div class="about-info">
          <p><strong>Nome:</strong> OD Drive - Gerador de Or√ßamentos</p>
          <p><strong>Vers√£o:</strong> 1.0.0</p>
          <p><strong>Desenvolvido por:</strong> OD Drive</p>
        </div>
      </section>
    </main>
  </div>

  <script src="../../shared/web-bridge.js"></script>
  <script src="./settings.js"></script>
</body>
</html>
